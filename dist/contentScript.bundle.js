(()=>{"use strict";const e="hideCounts",t=async(t,a)=>{const o=await(async t=>(await t.get(e))[e]||{})(t),n=o[a]||0,r={[e]:{...o,[a]:n+1}};await t.set(r)},a="home",o="playlist",n="player",r="channel-index",s={[n]:"/watch",[o]:"/playlist",[r]:"/@",[a]:"/"},c=e=>e?.textContent?.trim(),i=["ytd-rich-item-renderer","yt-lockup-view-model","ytd-playlist-video-renderer"],l=["related","content"],y=async e=>{(e=>Array.from(e.querySelectorAll(".yt-badge-shape__text")).some(e=>e.textContent.toLowerCase().includes("Members only".toLowerCase())))(e)&&(await(async e=>{try{await(async e=>{browser.storage.local&&await(async e=>await t(browser.storage.local,e))(e),browser.storage.session&&await(async e=>await t(browser.storage.session,e))(e)})(e)}catch(e){}})((e=>{switch(function(){for(const[e,t]of Object.entries(s))if(window.location.pathname.startsWith(t))return e;return null}()){case n:case a:{const t=e.querySelector("yt-content-metadata-view-model span.yt-content-metadata-view-model__metadata-text");return c(t)}case r:{const e=document.getElementById("page-header"),t=e?.querySelector(".dynamicTextViewModelH1 span.yt-core-attributed-string");return c(t)}case o:{const t=e.querySelector(".ytd-channel-name a");return c(t)}default:return null}})(e)||"Unknown"),e.remove())},d=async e=>{for(const t of i){const a=e.matches(t)?[e]:e.querySelectorAll&&e.querySelectorAll(t);for(const e of a)await y(e)}},w=async e=>{const t=Array.from(e.addedNodes).filter(e=>e.nodeType===Node.ELEMENT_NODE);for(const e of t)await d(e)},u=async e=>{for(const t of i)for(const a of e.querySelectorAll(t))await y(a)};(async()=>{await(async()=>{const e=new MutationObserver(async e=>{for(const t of e)await w(t)}),t={childList:!0,subtree:!0};for(const a of l){const o=document.getElementById(a);o&&(await u(o),e.observe(o,t))}})()})()})();